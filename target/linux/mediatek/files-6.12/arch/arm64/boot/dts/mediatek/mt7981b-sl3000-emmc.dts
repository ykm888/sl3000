/dts-v1/;

/ {
    compatible = "sl,3000-emmc", "mediatek,mt7981";
    model = "SL-3000 eMMC bootstrap version";
    #address-cells = <2>;
    #size-cells = <2>;
    interrupt-parent = <&gic>;

    memory {
        device_type = "memory";
        reg = <0x40000000 0x40000000>; /* 1GB RAM */
    };

    chosen {
        bootargs = "console=ttyS0,115200n1 earlycon=uart8250,mmio32,0x11002000 root=PARTLABEL=rootfs rootwait rootfstype=squashfs,f2fs";
    };

    cpus {
        #address-cells = <1>;
        #size-cells = <0>;
        cpu@0 {
            device_type = "cpu";
            compatible = "arm,cortex-a53";
            reg = <0>;
            enable-method = "psci";
        };
        cpu@1 {
            device_type = "cpu";
            compatible = "arm,cortex-a53";
            reg = <1>;
            enable-method = "psci";
        };
    };

    serial@11002000 {
        compatible = "mediatek,mt6577-uart";
        reg = <0x0 0x11002000 0x0 0x400>;
        interrupts = <0 123 4>; /* GIC, irq=123, level-high */
        status = "okay";
    };

    mmc@11230000 {
        compatible = "mediatek,mt7981-mmc";
        reg = <0x0 0x11230000 0x0 0x1000>;
        interrupts = <0 143 4>; /* GIC, irq=143, level-high */
        bus-width = <8>;
        non-removable;
        cap-mmc-highspeed;
        max-frequency = <50000000>;
        pinctrl-names = "default";
        status = "okay";

        partitions {
            compatible = "fixed-partitions";
            #address-cells = <1>;
            #size-cells = <1>;

            partition@0 {
                label = "kernel";
                reg = <0x00000000 0x02000000>; /* 32MB */
            };

            partition@2000000 {
                label = "rootfs";
                reg = <0x02000000 0x20000000>; /* 512MB */
            };

            partition@22000000 {
                label = "rootfs_data";
                reg = <0x22000000 0x40000000>; /* 1GB */
            };

            partition@62000000 {
                label = "docker";
                reg = <0x62000000 0xEE000000>; /* 60GB */
            };

            partition@F0000000 {
                label = "swap";
                reg = <0xF0000000 0x80000000>; /* 2GB */
            };

            /* 剩余空间分区去掉 size=0，避免 dtc 报错 */
        };
    };

    ethernet@15100000 {
        compatible = "mediatek,mt7981-eth";
        reg = <0x0 0x15100000 0x0 0x80000>;
        interrupts = <0 196 4>; /* GIC, irq=196, level-high */
        status = "okay";

        mac@0 {
            compatible = "mediatek,eth-mac";
            reg = <0>;
            phy-mode = "2500base-x";
            fixed-link {
                speed = <2500>;
                full-duplex;
            };
        };

        mac@1 {
            compatible = "mediatek,eth-mac";
            reg = <1>;
            phy-mode = "2500base-x";
            fixed-link {
                speed = <2500>;
                full-duplex;
            };
        };
    };

    leds {
        compatible = "gpio-leds";
        led-0 {
            label = "red:status";
            gpios = <&pio 10 0>; /* active high */
            default-state = "off";
        };
        led-1 {
            label = "green:status";
            gpios = <&pio 11 0>; /* active high */
            linux,default-trigger = "heartbeat";
        };
        led-2 {
            label = "blue:status";
            gpios = <&pio 12 0>; /* active high */
            default-state = "off";
        };
    };

    gpio-keys {
        compatible = "gpio-keys";
        reset {
            label = "reset";
            gpios = <&pio 1 1>; /* active low */
            linux,code = <KEY_RESTART>;
            debounce-interval = <50>;
        };
    };
};